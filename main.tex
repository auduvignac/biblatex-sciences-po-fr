\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel} % Charger babel pour la typographie française générale
\usepackage{csquotes}
\usepackage{hyperref}

% Configuration de biblatex (activation d'ibid./op. cit. pour les notes)
\usepackage[
    style=authoryear, % Base pour la bibliographie
    citestyle=verbose-trad1, % Style de notes avec ibid./op. cit.
    backend=biber,    
    hyperref=true,
    pagetracker=true, % Assure le suivi des pages (pour ibid.)
    doi=false,        
    url=false,
    autolang=other % Empêche biblatex d'adapter la langue via babel (utile pour ibid./op. cit.)
]{biblatex}

% Fichiers bibliographiques
\addbibresource{bibliographies/articles.bib}
\addbibresource{bibliographies/livres.bib}
\addbibresource{bibliographies/rapports.bib}

% --- GESTION DU NOMBRE D'AUTEURS (et al.) ---
\AtBeginDocument{%
    % Limite à 3 auteurs avant de mettre et al.
    \setcounter{maxnames}{3}
    \setcounter{minnames}{1}
}
% Séparateurs entre auteurs : virgule + espace
\DeclareDelimFormat{multinamedelim}{\addcomma\space}
\DeclareDelimFormat{finalnamedelim}{\addcomma\space}

% --- FORMATTAGE DES NOMS : NOM, Prénom. (avec majuscules) ---
\DeclareNameFormat{labelname}{%
  % Même format pour tous les auteurs : NOM, Prénom.
  \nameparts{#1}%
  \ifdef\namepartfamily{%
    \ifblank{\namepartgiven}
      {\namepartfamily}% cas institution : respecter la casse
      {\MakeUppercase{\namepartfamily}}%
  }{}%
  \ifblank{\namepartgiven}{}{\addcomma\space\namepartgiven}%
  \ifnumless{\value{listcount}}{\value{liststop}}{\addcomma\space}{}%
}
% Utiliser ce format pour tous les auteurs (notes + bibliographie)
\DeclareNameAlias{author}{labelname}
\DeclareNameAlias{editor}{labelname}

% --- FORMATTAGE DES CHAMPS STANDARDS (pas d'italique, ponctuation) ---
\DeclareFieldFormat{title}{#1\adddot} 
\DeclareFieldFormat{edition}{#1\adddot}
\DeclareFieldFormat[incollection]{title}{#1} % pas de point ni de guillemets avant "In"
\DeclareFieldFormat[incollection]{booktitle}{#1} % titre d'ouvrage collectif en romain
\DeclareFieldFormat[incollection]{pages}{#1} % conserver la pagination brute pour ajouter "p."
\DeclareFieldFormat[article]{title}{#1} % pas de guillemets pour les articles
\DeclareFieldFormat[article]{pages}{#1} % pas de préfixe automatique
\DeclareFieldFormat{journaltitle}{#1} % revues en romain

% --- DRIVER POUR LIVRE (@book) ---
% Format: AUTEUR, Prénom. Titre. Edition. Lieu de publication : éditeur, année. Pagination.
\DeclareBibliographyDriver{book}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \printnames{author}%
  \newunit\newblock%
  \printfield{title}% 
  \newunit\newblock%
  \printfield{edition}% 
  \newunit\newblock%
  \printlist{location}% 
  \addcolon\space%
  \printlist{publisher}% 
  \addcomma\space%
  \printfield{year}\adddot%
  \addspace%
  \printfield{pages}%
  \usebibmacro{finentry}%
}

% --- DRIVER POUR CHAPITRE (@incollection) ---
% Format: Auteur. Titre du chapitre. In Éditeur (dir.). Titre de l’ouvrage collectif. Lieu : éditeur, année. Pagination.
\DeclareBibliographyDriver{incollection}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \printnames{author}%
  \newunit\newblock%
  \printfield{title}%
  \newunit\newblock%
  \printtext{In\space}%
  \printnames{editor}%
  \iffieldundef{editortype}{}{\addspace\printfield{editortype}}%
  \setunit{\addperiod\space}%
  \printfield{booktitle}%
  \newunit\newblock%
  \printlist{location}%
  \addcolon\space%
  \printlist{publisher}%
  \addcomma\space%
  \printfield{year}\adddot%
  \addspace%
  \printtext{p.\addspace}%
  \printfield{pages}%
  \usebibmacro{finentry}%
}

% --- DRIVER POUR ARTICLE DE REVUE (@article) ---
% Format: Auteur. Titre de l’article. Titre de la revue, mois année, vol. <volume>, n° <numéro>, p. <pagination>.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \printnames{author}%
  \newunit\newblock%
  \printfield{title}%
  \setunit{\adddot\space}%
  \printfield{journaltitle}%
  \addcomma\space%
  \iffieldundef{monthtext}{\printfield{month}\addspace\printfield{year}}{\printfield{monthtext}}%
  \addcomma\space%
  \iffieldundef{volume}{}{\printtext{vol.\addspace}\printfield{volume}\addcomma\space}%
  \iffieldundef{number}{}{\printtext{n\textsuperscript{o}\addspace}\printfield{number}\addcomma\space}%
  \printtext{p.\addspace}\printfield{pages}%
  \usebibmacro{finentry}%
}

% --- DRIVER POUR RAPPORT (@report) ---
% Format: Auteur/Institution. Titre. Rapport <numéro>. Institution, année. Série.
\DeclareBibliographyDriver{report}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \renewcommand*{\newunitpunct}{\adddot\space}%
  \iffieldundef{shortinstitution}
    {\ifnameundef{author}{\printlist{institution}}{\printnames{author}}}
    {\printfield{shortinstitution}}%
  \setunit{\addperiod\space}%
  \printfield{title}%
  \setunit{\addperiod\space}%
  \iffieldundef{type}
    {\iffieldundef{number}
       {}% neither type nor number
       {\printfield{number}}}% only number
    {\printfield{type}%
     \iffieldundef{number}
       {}% only type
       {\addspace\printfield{number}}}% type and number
  \setunit{\addperiod\space}%
  \iffieldundef{organization}{\printlist{institution}}{\printlist{organization}}%
  \addcomma\space%
  \printfield{year}%
  \setunit{\space}%
  \printtext{\mkbibparens{\printfield{series}}}%
  \usebibmacro{finentry}%
}


\begin{document}

\section*{Texte d'exemple}

\subsection*{Citations}
% Les citations d'article ont été retirées pour se concentrer uniquement sur les livres
\footcite{Boursin:1991} % 1. Boursin (Première citation complète)
\footcite{Fitoussi:1995} % 2. Fitoussi (Première citation complète)
\footcite{Fitoussi:1995} % 3. Fitoussi (Devrait être ibid.)
\footcite[][150]{Fitoussi:1995} % 4. Fitoussi, p. 150 (Devrait être ibid., p. 150)
\footcite{Vernant:2000} % 5. Vernant (Citation complète)
\footcite{Fitoussi:1995} % 6. Fitoussi (Devrait être op. cit. / loc. cit.)
\footcite{Hermet:2000} % 7. Hermet et al. (doit produire et al.)
\footcite{Lazar:1991} % 8. Lazar et al. (citation complète)
\footcite{Insee:2020} % 9. Rapport Insee (rapport numéroté)
\footcite{Insee:2020} % 10. Rapport Insee (rapport numéroté, Devrait être ibid.)
\footcite{Hassenteufel:1993} % 11. Chapitre d'ouvrage collectif
\footcite{Leca:2001} % 12. Article de revue
\footcite{Simeant:1993} % 13. Article de revue


\newpage
\printbibliography[heading=bibintoc, title=Bibliographie]

\end{document}
